<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>CENTOS 6.5安装vncserver | zbvae&#39;s blog</title>
  <meta name="author" content="Bin Zhang">
  
  <meta name="description" content="vnc是一款使用广泛的服务器管理软件，可以实现图形化管理，下面简单介绍一下如何在centos6.5下安装vnc。
[toc]
安装vncserver输入命令：yum -y install tigervnc-server
配置 vncserver编辑/etc/sysconfig/vncservers文件,找到

VNCSERVERS=”2:myusername”VNCSERVERARGS[2]=”-geometry 800x600 -nolisten tcp -localhost”

修改为：

VNCSERVERS=”1:root”VNCSERVERARGS[1]=”-geometry 1024x768”">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="CENTOS 6.5安装vncserver"/>
  <meta property="og:site_name" content="zbvae&#39;s blog"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="zbvae&#39;s blog" type="application/atom+xml">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
  <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-368771XX-X']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>

<body>
  <header id="header" class='normal_mode'>
    <nav id="main-nav">
  <ul class='container'>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
  </header>
  <div id="content" class="container">
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
      <time datetime="2016-03-08T14:04:11.000Z"><a href="/2016/03/08/CENTOS-6-5安装vncserver/">周二, 3月 8 2016, 10:04:11 晚上</a></time>

  
    <h1 class="title">CENTOS 6.5安装vncserver</h1>
  



  
  <div class="tags">
  	<i class="fa fa-tag"></i>
    <a href="/tags/云服务器/">云服务器</a>
  </div>

<div class="clear"></div>
      
    </header>
    <div class="entry">
      
        <p>vnc是一款使用广泛的服务器管理软件，可以实现图形化管理，下面简单介绍一下如何在centos6.5下安装vnc。</p>
<p>[toc]</p>
<h3 id="安装vncserver">安装vncserver</h3><p>输入命令：<code>yum -y install tigervnc-server</code></p>
<h3 id="配置_vncserver">配置 vncserver</h3><p>编辑/etc/sysconfig/vncservers文件,找到</p>
<blockquote>
<p>VNCSERVERS=”2:myusername”<br>VNCSERVERARGS[2]=”-geometry 800x600 -nolisten tcp -localhost”</p>
</blockquote>
<p>修改为：</p>
<blockquote>
<p>VNCSERVERS=”1:root”<br>VNCSERVERARGS[1]=”-geometry 1024x768” <a id="more"></a></p>
</blockquote>
<h3 id="设置远程登陆密码">设置远程登陆密码</h3><p>输入<code>vncserver</code>命令，系统会检测到您是第一次输入，提示您设置密码，连续输入两次即可。这个密码是vnc连接密码，和系统密码没有关系。可以不一样。</p>
<blockquote>
<p>[root@localhost ~]# vncpasswd Password:<br>Verify:[root@localhost ~]# </p>
</blockquote>
<p>后期可以通过输入vncpasswd命令，来设置vnc用户登录密码</p>
<h3 id="启动和关闭vncserver">启动和关闭vncserver</h3><p>第一次启动时直接输入<code>vncserver</code>系统会自动建立相关的配置文件和日志文件。启动后系统会提示出一个进程号为1的窗口。如果需要启动两个窗口的话则再次执行<code>vncserver</code>命令即可。</p>
<p>通过输入命令<code>vncserver -kill :1</code>来关闭刚刚启动的1号窗口服务，可以通过输入命令<code>vncserver :1</code>来再次启动1号窗口提供vnc远程登录服务。</p>
<h3 id="让vnc服务开机启动">让vnc服务开机启动</h3><p>输入命令<code>chkconfig  vncserver  --level 345  on</code>或者直接输入<code>chkconfig vncserver on</code></p>
<p>再通过输入<code>chkconfig --list</code>查看所有的开机启动服务里有没有vncserver.</p>
<h3 id="客户端使用vncviewer">客户端使用vncviewer</h3><p>安装vncviewer之后，打开软件，以 “ip:1”的形式连接，输入密码后进入到vncserver中。 </p>
<h3 id="问题及解决方法">问题及解决方法</h3><p>若进入后系统显示灰屏的话需要修改<strong>~/.vnc/xstartup</strong>文件，找到最后一行，将</p>
<blockquote>
<p>twm &amp; #注释掉这一行<br>gnome-session &amp; #添加这一行</p>
</blockquote>
<p>输入<code>service vncserver restart</code>重启vncserver服务，再次使用vncviewer登录，如果还是灰屏，则查看日志 <code>cat ~.vnc/name:1.log</code>，查看其中出现的错误，一般是还未安装gnome环境，则通过网络安装即可：<code>yum -y install gnome-session</code>,<code>yum -y install xterm</code>,<code>yum -y install xsetroot</code>.</p>
<p>安装完以上，这时候登录进去，不再是灰屏，可能是空白桌面，也就是没有图标，这时候，再次查看日子，发现错误，最后发现没有安装任务栏和桌面插件,通过网络安装即可<code>yum -y install gnome-panel</code>.</p>
<p>解决桌面图标问题之后，有可能还会发现，浏览中文显示乱码的问题，那是因为桌面环境是英文的，可以通过echo $LANG,来确定，通过网络安装中文支持包<code>yum groupinstall chinese-support</code>，安装完成之后，修改/etc/sysconfig/i18n文件，设置<code>LANG=zh_CN.UTF-8</code>。</p>
<p>以上这些解决是通过查看日志，发现问题，逐项解决，可以通过以下系统方案解决。</p>
<blockquote>
<p>安装图形桌面环境</p>
<ul>
<li>要安装 KDE 桌面环境，执行指令，<blockquote>
<blockquote>
<p><code>yum groupinstall &quot;X Window System&quot; &quot;KDE Desktop&quot; Desktop</code>即可，同时安装了 3 个软件包。注意，因为 KDE Desktop 和  X Window System 两个软件包名称中间都包含空格，需要用引号引起来才行。</p>
</blockquote>
</blockquote>
</li>
<li>要安装 Gnome 桌面环境，执行指令，<blockquote>
<blockquote>
<p><code>yum groupinstall &quot;X Window System&quot; &quot;Desktop Platform&quot; Desktop</code>即可，也是同时安装了 3 个软件包，其中 X Window System 是必须的，不管是 Gnome 还是 KDE。</p>
</blockquote>
</blockquote>
</li>
</ul>
<p>既然是桌面环境，可能还需要诸如字体、管理工具之类的，如，</p>
<ul>
<li>yum -y groupinstall “Graphical Administration Tools”</li>
<li>yum -y groupinstall “Internet Browser”</li>
<li>yum -y groupinstall “General Purpose Desktop”</li>
<li>yum -y groupinstall “Office Suite and Productivity”</li>
<li>yum -y groupinstall “Graphics Creation Tools”</li>
</ul>
</blockquote>

      
    </div>
    <footer>
      
          
<!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <span class="jiathis_txt">分享到：</span>
  <a class="jiathis_button_weixin">微信</a>
  <a class="jiathis_button_tsina">新浪微博</a>
  <a class="jiathis_button_renren">人人网</a>
  <a class="jiathis_button_qzone">QQ空间</a>
  <a class="jiathis_button_douban">豆瓣</a>
  <a class="jiathis_button_pocket">Pocket</a>
  <a href="http://www.jiathis.com/share?uid=901656" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" src="http://v3.jiathis.com/code_mini/jia.js?uid=901656" charset="utf-8"></script>
<!-- JiaThis Button END -->

          <div class="clearfix"></div>
          <nav id="pagination">
  
    <a href="/2016/03/17/Java微信公众号应用部署在阿里云ECS/" class="alignleft prev"><i class="fa fa-long-arrow-left"></i>Next</a>
  
  
    <a href="/2016/02/24/新新新年/" class="alignright next">Prev<i class="fa fa-long-arrow-right"></i></a>
  
  <div class="clearfix"></div>
</nav>
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<section id="comment">
  <h1 class="title">留言</h1>

  
      <!-- Duoshuo Comment BEGIN -->
<div class="ds-thread" data-thread-key="/2016/03/08/CENTOS-6-5安装vncserver/"></div>
<!-- Duoshuo Comment END -->
  
</section>



    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div>
  
  &copy; 2016 Bin Zhang
  
</div>
Powered by <a href="http://zespia.tw/hexo/" title="Hexo" target="_blank" rel="external">Hexo</a> and <a href="http://pages.github.com/" title="GitHub Pages" target="_blank" rel="external">GitHub Pages</a>

<div class="clearfix"></div></footer>
  
<script src="/js/jquery.imagesloaded.min.js" type="text/javascript"></script>
<script src="/js/gallery.js" type="text/javascript"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js" type="text/javascript"></script>




    <script type="text/javascript">
        (function(){

            $(window).scroll(function(){

                var scrollTop = $(window).scrollTop();
                if ( scrollTop >200 ){
                    $("#main-nav").removeClass('normal_mode').addClass('top_mode');
                } else{
                    $("#main-nav").removeClass('top_mode').addClass('normal_mode');
                }

            });

        })();
    </script>



  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript">
  (function($){
    $('.fancybox').fancybox({
      'titlePosition': 'inside'
    });
  })(jQuery);
  </script>



    
    <script type="text/javascript">
      var duoshuoQuery = {short_name:"your_id"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = 'http://static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0] 
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>



<script type="text/javascript">
  
  $(function(){

    $('.title').hover(
      function() {      
        $(this).stop().animate(
          {'marginLeft': '10px'}, 200
        );   
      }, 
      function() {       
        $(this).stop().animate({'marginLeft': '0px'}, 200);      
      
    });   

  });

</script>


</body>
</html>