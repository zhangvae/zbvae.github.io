<!DOCTYPE html><html lang="en_US"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> · zbvae's blog</title><meta name="description" content=" - Bin Zhang"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><!-- fonts--><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="http://fonts.lug.ustc.edu.cn/css?family=Source+Sans+Pro:400,600" type="text/css"><!-- baidu analytics--><script type="text/javascript">var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?9e0cbea7d3319c6c94c71dfb93c151b8";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><!-- google analytics--><script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-74273646-1', 'auto');
ga('send', 'pageview');</script></head><body><input type="checkbox" id="sidebar-toggle"><aside><div class="author"><a href="/."><img src="/img/author.png" class="author-img"></a><h2 class="author-name">Bin Zhang</h2></div><div class="post-toc"><span class="toc-title">Directory</span><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#XML文件"><span class="toc-text">XML文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XML解析"><span class="toc-text">XML解析</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DOM解析"><span class="toc-text">DOM解析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SAX解析"><span class="toc-text">SAX解析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JDOM解析"><span class="toc-text">JDOM解析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DOM4J解析"><span class="toc-text">DOM4J解析</span></a></li></ol></li></ol></div></aside><div class="main"><header><div id="top"><a href="/." class="logo-link">zbvae's blog</a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">归档</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">标签</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">关于</a></li></ul></div></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title"></h1><div class="post-time">Apr 10, 2016</div><div class="post-content"><p>title: XML 学习<br>date: 2015-07-11 13:44:06<br>tags: 技术交流</p>
<hr>
<p><strong>摘要</strong>：xml 作为一种可扩展的标记语言出现，其相对于html，主要是用于数据的保存，和数据结构信息的描述，标记格式并不固定，可以自行定制，但是必须要嵌套出现。下面介绍XML的基本格式和语法以及4种解析方式。<a id="more"></a></p>
<h3 id="XML文件">XML文件</h3><pre><code>&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;
&lt;users&gt;
     &lt;user id=<span class="string">"1"</span>&gt;
          &lt;name&gt;Andrea&lt;/name&gt;
          &lt;age&gt;10&lt;/age&gt;
          &lt;<span class="keyword">gender</span>&gt;Male&lt;/<span class="keyword">gender</span>&gt;
     &lt;/user&gt;
     &lt;user id=<span class="string">"2"</span>&gt;
          &lt;name&gt;Bell&lt;/name&gt;
          &lt;age&gt;20&lt;/age&gt;
          &lt;<span class="keyword">gender</span>&gt;Male&lt;/<span class="keyword">gender</span>&gt;
     &lt;/user&gt;
     &lt;user id=<span class="string">"3"</span>&gt;
          &lt;name&gt;Calinda&lt;/name&gt;
          &lt;age&gt;30&lt;/age&gt;
          &lt;<span class="keyword">gender</span>&gt;Female&lt;/<span class="keyword">gender</span>&gt;
     &lt;/user&gt;
&lt;/users&gt;
</code></pre><p>上面即使基本的XML文件，一个XML文件分为<strong>头信息</strong>和<strong>数据区</strong>。</p>
<p>头信息即上述XML文件的第一行，<code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;</code>该头信息指定XML文件的版本和字符编码。</p>
<p>除去第一行之后的内容都属于本XML文件的数据区，即数据保存部分。其中根元素为users，又包含3个user元素，user元素有id属性和3个标签元素，分别是name,age和gender。</p>
<h3 id="XML解析">XML解析</h3><p>下面介绍XML文件的四种解析方式，DOM方式，SAX解析，JDOM方式以及DOM4J方式。</p>
<p>以简单工厂设计模式，先定义一个基本的XML解析接口作为产品接口,包含解析xml，和生成xml文件两个抽象方法，再定义4个具体的产品类即4种XML解析方式，以枚举方式描述。定义解析工厂如下。</p>
<pre><code>/**
 * <span class="type">ParserMethod</span> <span class="keyword">enum</span>
 */
<span class="keyword">enum</span> <span class="type">ParserMethod</span>{
    <span class="type">DOM</span>,<span class="type">SAX</span>,<span class="type">JDOM</span>,<span class="type">DOM4J</span>
}


/**
 * <span class="type">HelperFactory</span> to manufacture <span class="type">XmlHelper</span>
 * a <span class="keyword">static</span> <span class="keyword">method</span> <span class="keyword">is</span> needed
 */
class <span class="type">XmlHelperFactory</span>{
    public <span class="keyword">static</span> <span class="type">XmlHelper</span> newInstance(<span class="type">ParserMethod</span> <span class="keyword">method</span>){
        <span class="type">XmlHelper</span> helper = null;
        switch (<span class="keyword">method</span>) {
        <span class="keyword">case</span> <span class="type">DOM</span>:
            helper = new <span class="type">DomHelper</span>();
            <span class="keyword">break</span>;
        <span class="keyword">case</span> <span class="type">SAX</span>:
            helper = new <span class="type">SaxHelper</span>();
            <span class="keyword">break</span>;
        <span class="keyword">case</span> <span class="type">JDOM</span>:
            helper = new <span class="type">JDomHelper</span>();
            <span class="keyword">break</span>;
        <span class="keyword">case</span> <span class="type">DOM4J</span>:
            helper = new <span class="type">Dom4JHelper</span>();
            <span class="keyword">break</span>;
        default:
            <span class="keyword">break</span>;
        }
        <span class="keyword">return</span> helper;
    }
}


/**
 * <span class="type">Base</span> <span class="type">XmlHelper</span> <span class="keyword">interface</span>
 */
<span class="keyword">interface</span> <span class="type">XmlHelper</span>{
    <span class="type">void</span> parseXml(<span class="type">String</span> fileName)throws <span class="type">Exception</span> ;
    <span class="type">void</span> writeXml(<span class="type">String</span> fileName) throws <span class="type">Exception</span> ;
}
</code></pre><h4 id="DOM解析">DOM解析</h4><p>第一种即为W3C推荐的标准，DOM解析方式，以DOM树的形式将整个XML文件结构装载到内存中。</p>
<p>要知道对于一个大而复杂的XML文件，在内存中建立它的DOM树形式是非常耗费空间的，因此DOM解析方式适合解析那些XML文件较小，内容需要经常修改，结构较为简单的。</p>
<p>对于小XML文件，使用DOM解析方式，非常简单，且易于理解，由于DOM树存于内存中，支持随意读取，对于上述XML文件，只要将其想象成一颗树，根元素为users。解析代码如下：</p>
<pre><code><span class="comment">/**
 * DomHelper, a concrete XmlHelper product
 */</span>
class DomHelper implements XmlHelper {
    private DocumentBuilder builder = null;

    public DomHelper<span class="params">()</span>{
        try{
            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance<span class="params">()</span>;
            builder = factory.newDocumentBuilder<span class="params">()</span>;
        }catch<span class="params">(Exception e)</span>{

        }

    }
    public void parseXml<span class="params">(String fileName)</span> throws Exception {

        Document document = builder.parse<span class="params">(fileName)</span>;

        NodeList nodes = document.getChildNodes<span class="params">()</span>;<span class="comment">//document.getElementsByTagName("users");</span>

        <span class="keyword">for</span><span class="params">(int i=<span class="number">0</span>;i&lt;nodes.getLength<span class="params">()</span>;i++)</span>{
            Node users = nodes.item<span class="params">(i)</span>;
            NodeList user = users.getChildNodes<span class="params">()</span>;

            <span class="keyword">for</span><span class="params">(int j=<span class="number">0</span>;j&lt;user.getLength<span class="params">()</span>;j++)</span>{
                Node userInfo = user.item<span class="params">(j)</span>;
                NamedNodeMap userAttr = userInfo.getAttributes<span class="params">()</span>;
                <span class="keyword">if</span><span class="params">(userAttr != null &amp;&amp; userAttr.getLength<span class="params">()</span> &gt; <span class="number">0</span>)</span>{
                    <span class="keyword">for</span><span class="params">(int at=<span class="number">0</span>;at&lt;userAttr.getLength<span class="params">()</span>;at++)</span>{
                        System.out.print<span class="params">(userAttr.item<span class="params">(at)</span>.getNodeName<span class="params">()</span> + 
                        <span class="string">"="</span> + userAttr.item<span class="params">(at)</span>.getTextContent<span class="params">()</span>)</span>;
                    }
                }
                NodeList infoMeta = userInfo.getChildNodes<span class="params">()</span>;

                <span class="keyword">for</span><span class="params">(int k=<span class="number">0</span>;k&lt;infoMeta.getLength<span class="params">()</span>;k++)</span>{
                    <span class="keyword">if</span><span class="params">(infoMeta.item<span class="params">(k)</span>.getNodeName<span class="params">()</span> != <span class="string">"#text"</span>)</span>{
                        System.out.print<span class="params">(infoMeta.item<span class="params">(k)</span>.getNodeName<span class="params">()</span> + 
                        <span class="string">":"</span> + infoMeta.item<span class="params">(k)</span>.getTextContent<span class="params">()</span>)</span>;
                    }
                    System.out.print<span class="params">(<span class="string">"\t"</span>)</span>;
                }
                System.out.println<span class="params">()</span>;
            }
        }
    }

    public void writeXml<span class="params">(String fileName)</span> throws Exception{
        Document document = builder.newDocument<span class="params">()</span>;

        Node users = document.createElement<span class="params">(<span class="string">"users"</span>)</span>;
        Node user = document.createElement<span class="params">(<span class="string">"user"</span>)</span>;
        Node name = document.createElement<span class="params">(<span class="string">"name"</span>)</span>;
        Node age = document.createElement<span class="params">(<span class="string">"age"</span>)</span>;
        Node gender = document.createElement<span class="params">(<span class="string">"gender"</span>)</span>;

        name.appendChild<span class="params">(document.createTextNode<span class="params">(<span class="string">"zhangsan"</span>)</span>)</span>;
        age.appendChild<span class="params">(document.createTextNode<span class="params">(<span class="string">"20"</span>)</span>)</span>;
        gender.appendChild<span class="params">(document.createTextNode<span class="params">(<span class="string">"Male"</span>)</span>)</span>;

        user.appendChild<span class="params">(name)</span>;
        user.appendChild<span class="params">(age)</span>;
        user.appendChild<span class="params">(gender)</span>;

        users.appendChild<span class="params">(user)</span>;
        document.appendChild<span class="params">(users)</span>;

        TransformerFactory factory = TransformerFactory.newInstance<span class="params">()</span>;
        Transformer transformer = factory.newTransformer<span class="params">()</span>;
        transformer.setOutputProperty<span class="params">(OutputKeys.ENCODING,<span class="string">"utf-8"</span>)</span>;

        DOMSource source = new DOMSource<span class="params">(document)</span>;
        StreamResult result = new StreamResult<span class="params">(new File<span class="params">(fileName)</span>)</span>;
        transformer.transform<span class="params">(source,result)</span>;
    }
}
</code></pre><p>在主函数中使用该种解析方式，</p>
<pre><code><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestXml</span></span>{
    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>{
        <span class="comment">//Simple factory mode</span>
        XmlHelper helper = XmlHelperFactory.newInstance(ParserMethod.JDOM);
        helper.parseXml(<span class="string">"./example.xml"</span>);
        helper.writeXml(<span class="string">"./output.xml"</span>);
    }
}
</code></pre><p>输出如下：</p>
<blockquote>
<p>id=1 name:Andrea  age:10  gender:Male<br>id=2 name:Bell  age:20  gender:Male<br>id=3 name:Calinda  age:30  gender:Female </p>
</blockquote>
<h4 id="SAX解析">SAX解析</h4><p>第二种方式为SAX解析方式，也是W3C提供的xml解析标准，与DOM解析方式不同的是，SAX解析以事件驱动方式进行，顺序部分解析，还必须定义自己的事件处理器类，该类继承自DefaultHandler类。</p>
<p>主要方法有startDocument方法，文档开始自动调用，endDocument文档结束自动调用，startElement，元素开始自动调用（根元素和节点元素都是如此）,endElement，元素结束自动调用。characters方法遇到具体的元素结点内部值会自动调用，并解析。</p>
<p>SAX解析方式不在乎文档大小，即时加载元素结点，存在于内存的东西相当少，因此SAX解析方式更加灵活，可以针对那些XML文档较大的解析，SAX易于读取，但<strong>不支持文件修改</strong>,因此writeXml方法无内容。</p>
<pre><code><span class="comment">/**
 * SaxHelper, another XmlHelper product
 */</span>
class SaxHelper implements XmlHelper {
    <span class="keyword">public</span> <span class="keyword">void</span> parseXml(<span class="keyword">String</span> fileName) <span class="keyword">throws</span> Exception{
        SAXParserFactory factory = SAXParserFactory.newInstance();
        SAXParser parser = factory.newSAXParser();

        parser.parse(fileName,<span class="keyword">new</span> MySaxHandler());
    }

    <span class="keyword">public</span> <span class="keyword">void</span> writeXml(<span class="keyword">String</span> fileName) <span class="keyword">throws</span> Exception {

    }
}

class MySaxHandler extends DefaultHandler{
    <span class="keyword">public</span> <span class="keyword">void</span> startDocument() <span class="keyword">throws</span> SAXException {
        System.out.<span class="built_in">println</span>(<span class="string">"&lt;?xml version=\"1.0\" encoding=\"utf-8\"&gt;"</span>);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> endDocument() <span class="keyword">throws</span> SAXException{
        System.out.<span class="built_in">println</span>(<span class="string">"document ended!"</span>);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> startElement(<span class="keyword">String</span> uri, <span class="keyword">String</span> localName, <span class="keyword">String</span> qName, Attributes attributes) <span class="keyword">throws</span> SAXException {
        System.out.<span class="built_in">print</span>(<span class="string">"&lt;"</span>);
        System.out.<span class="built_in">print</span>(qName);
        <span class="keyword">if</span>(attributes.getLength() &gt; <span class="number">0</span>){
            <span class="keyword">for</span>(<span class="built_in">int</span> i=<span class="number">0</span>;i&lt;attributes.getLength();i++){
                System.out.<span class="built_in">print</span>(<span class="string">" "</span>+attributes.getQName(i)+<span class="string">"=\""</span> + attributes.getValue(i)+<span class="string">"\""</span>);
            }
        }
        System.out.<span class="built_in">print</span>(<span class="string">"&gt;"</span>);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> endElement(<span class="keyword">String</span> uri,<span class="keyword">String</span> localName,<span class="keyword">String</span> qName) <span class="keyword">throws</span> SAXException {
        System.out.<span class="built_in">print</span>(<span class="string">"&lt;/"</span>);
        System.out.<span class="built_in">print</span>(qName);
        System.out.<span class="built_in">print</span>(<span class="string">"&gt;"</span>);
    }

    <span class="keyword">public</span> <span class="keyword">void</span> characters(<span class="built_in">char</span>[] ch, <span class="built_in">int</span> start, <span class="built_in">int</span> length){
        System.out.<span class="built_in">print</span>(<span class="keyword">new</span> <span class="keyword">String</span>(ch,start,length));
    }
}
</code></pre><p>使用主函数中的parseXml进行解析，输出如下：</p>
<pre><code>&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>&gt;
&lt;users&gt;
 &lt;user id=<span class="string">"1"</span>&gt;
  &lt;name&gt;Andrea&lt;/name&gt;
  &lt;age&gt;10&lt;/age&gt;
  &lt;<span class="keyword">gender</span>&gt;Male&lt;/<span class="keyword">gender</span>&gt;
 &lt;/user&gt;
 &lt;user id=<span class="string">"2"</span>&gt;
  &lt;name&gt;Bell&lt;/name&gt;
  &lt;age&gt;20&lt;/age&gt;
  &lt;<span class="keyword">gender</span>&gt;Male&lt;/<span class="keyword">gender</span>&gt;
 &lt;/user&gt;
 &lt;user id=<span class="string">"3"</span>&gt;
  &lt;name&gt;Calinda&lt;/name&gt;
  &lt;age&gt;30&lt;/age&gt;
  &lt;<span class="keyword">gender</span>&gt;Female&lt;/<span class="keyword">gender</span>&gt;
 &lt;/user&gt;
&lt;/users&gt;document ended!
</code></pre><h4 id="JDOM解析">JDOM解析</h4><p>第三种方式JDOM方式，JDOM解析方式=DOM可以修改+SAX大文件读取，相对DOM解析方式，更加简单灵活，统一以Element组织。</p>
<p>需要注意的是以下的JDOM和DOM4J解析都需要额外的jar包支持，下载之后放到某个目录，设置CLASSPATH环境变量即可使用。</p>
<p>这两个jar包都非常容易下载到，所以这里就不再提供了，具体版本可根据你需要选择，一般不会有太大差别。</p>
<pre><code><span class="comment"><span class="markdown">/**
 * JDomHelper, another XmlHelper product
 */</span></span>
<span class="class"><span class="keyword">class</span> <span class="title">JDomHelper</span> <span class="keyword">implements</span> <span class="title">XmlHelper</span> </span>{
    public <span class="keyword">void</span> parseXml(<span class="built_in">String</span> fileName) throws Exception {
        SAXBuilder builder = <span class="keyword">new</span> SAXBuilder();
        org.jdom2.Document <span class="built_in">document</span> = builder.build(<span class="keyword">new</span> File(fileName));

        <span class="built_in">Element</span> users = <span class="built_in">document</span>.getRootElement();
        <span class="built_in">List</span>&lt;<span class="built_in">Element</span>&gt; userList = users.getChildren();

        <span class="keyword">for</span>(<span class="built_in">int</span> i=<span class="number">0</span>;i&lt;userList.size();i++){
            <span class="built_in">Element</span> user = (<span class="built_in">Element</span>)userList.<span class="literal">get</span>(i);
            <span class="built_in">List</span>&lt;Attribute&gt; userAttr = user.getAttributes();

            <span class="keyword">for</span>(<span class="built_in">int</span> j=<span class="number">0</span>;j&lt;userAttr.size();j++){
                Attribute attr = userAttr.<span class="literal">get</span>(j);
                System.out.<span class="built_in">print</span>(attr.getName()+<span class="string">":"</span>+attr.getValue());
            }
            System.out.println();

            <span class="built_in">List</span>&lt;<span class="built_in">Element</span>&gt; userInfo = user.getChildren();
            <span class="keyword">for</span>(<span class="built_in">int</span> k=<span class="number">0</span>;k&lt;userInfo.size();k++){
                <span class="built_in">Element</span> userMeta = userInfo.<span class="literal">get</span>(k);
                System.out.println(userMeta.getName()+<span class="string">":"</span>+userMeta.getValue());
            }
            System.out.println();
        }

    }

    public <span class="keyword">void</span> writeXml(<span class="built_in">String</span> fileName) throws Exception {
        <span class="built_in">Element</span> users = <span class="keyword">new</span> <span class="built_in">Element</span>(<span class="string">"users"</span>);
        <span class="built_in">Element</span> user = <span class="keyword">new</span> <span class="built_in">Element</span>(<span class="string">"user"</span>);
        <span class="built_in">Element</span> name = <span class="keyword">new</span> <span class="built_in">Element</span>(<span class="string">"name"</span>);
        <span class="built_in">Element</span> age = <span class="keyword">new</span> <span class="built_in">Element</span>(<span class="string">"age"</span>);
        <span class="built_in">Element</span> gender = <span class="keyword">new</span> <span class="built_in">Element</span>(<span class="string">"gender"</span>);

        Attribute id = <span class="keyword">new</span> Attribute(<span class="string">"id"</span>,<span class="string">"1"</span>);

        name.setText(<span class="string">"zhangsan"</span>);
        age.setText(<span class="string">"10"</span>);
        gender.setText(<span class="string">"Male"</span>);

        user.setAttribute(id);
        user.addContent(name);
        user.addContent(age);
        user.addContent(gender);

        users.addContent(user);

        org.jdom2.Document <span class="built_in">document</span> = <span class="keyword">new</span> org.jdom2.Document(users);
        XMLOutputter out = <span class="keyword">new</span> XMLOutputter();
        out.setFormat(out.getFormat().setEncoding(<span class="string">"utf-8"</span>));
        out.output(<span class="built_in">document</span>,<span class="keyword">new</span> FileOutputStream(<span class="keyword">new</span> File(fileName)));
    }
}
</code></pre><h4 id="DOM4J解析">DOM4J解析</h4><p>第四种方式为DOM4J方式，Hibernate和Spring等框架都采用DOM4J方式支持XML文件的解析。</p>
<p>生成xml文件时，Document对象是依靠DocumentHelper的createDocument完成</p>
<pre><code><span class="comment">/**
 * Dom4JHelper, another XmlHelper product
 */</span>
class Dom4JHelper implements XmlHelper {
    public void parseXml<span class="params">(String fileName)</span> throws Exception{
        SAXReader reader = new SAXReader<span class="params">()</span>;
        org.dom4j.Document document = reader.read<span class="params">(new File<span class="params">(fileName)</span>)</span>;

        org.dom4j.Element users = document.getRootElement<span class="params">()</span>;
        Iterator&lt;org.dom4j.Element&gt; userIter = users.elementIterator<span class="params">()</span>;

        while <span class="params">(userIter.hasNext<span class="params">()</span>)</span> {
            org.dom4j.Element user = userIter.next<span class="params">()</span>;
            List&lt;org.dom4j.Attribute&gt; userAttr = user.attributes<span class="params">()</span>;
            <span class="keyword">for</span><span class="params">(int i=<span class="number">0</span>;i&lt;userAttr.size<span class="params">()</span>;i++)</span>{
                org.dom4j.Attribute attr = userAttr.get<span class="params">(i)</span>;
                System.out.println<span class="params">(attr.getName<span class="params">()</span>+<span class="string">":"</span>+attr.getValue<span class="params">()</span>)</span>;
            }
            Iterator&lt;org.dom4j.Element&gt; infoIter = user.elementIterator<span class="params">()</span>;
            while<span class="params">(infoIter.hasNext<span class="params">()</span>)</span>{
                org.dom4j.Element info = infoIter.next<span class="params">()</span>;
                System.out.println<span class="params">(info.getName<span class="params">()</span>+<span class="string">":"</span>+info.getText<span class="params">()</span>)</span>;
            }
            System.out.println<span class="params">()</span>;
        }
    }

    public void writeXml<span class="params">(String fileName)</span> throws Exception {
        org.dom4j.Document document = DocumentHelper.createDocument<span class="params">()</span>;
        org.dom4j.Element users = document.addElement<span class="params">(<span class="string">"users"</span>)</span>;
        org.dom4j.Element user = users.addElement<span class="params">(<span class="string">"user"</span>)</span>;
        org.dom4j.Element name = user.addElement<span class="params">(<span class="string">"name"</span>)</span>;
        org.dom4j.Element age = user.addElement<span class="params">(<span class="string">"age"</span>)</span>;
        org.dom4j.Element gender = user.addElement<span class="params">(<span class="string">"gender"</span>)</span>;

        user.addAttribute<span class="params">(<span class="string">"id"</span>, <span class="string">"1"</span>)</span>;

        name.setText<span class="params">(<span class="string">"zhangsan"</span>)</span>;
        age.setText<span class="params">(<span class="string">"20"</span>)</span>;
        gender.setText<span class="params">(<span class="string">"Male"</span>)</span>;

        OutputFormat format = OutputFormat.createPrettyPrint<span class="params">()</span>;    
        format.setEncoding<span class="params">(<span class="string">"utf-8"</span>)</span>;
        XMLWriter writer = new XMLWriter<span class="params">(new FileOutputStream<span class="params">(new File<span class="params">(fileName)</span>)</span>)</span>;
        writer.write<span class="params">(document)</span>;
        writer.close<span class="params">()</span>;
    }
}
</code></pre></div></article></div><div class="tags"></div><div class="paginator"><a href="/2016/04/10/Java微信公众号应用部署在阿里云ECS/" class="next"><span>下一页</span><i class="fa fa-chevron-right"></i></a></div></section><footer><section id="comments"><div data-thread-key="http://blog.zbvae.com/2016/04/10/XML-学习/index.html" data-title="" data-url="http://blog.zbvae.com/2016/04/10/XML-学习/index.html" class="ds-thread"></div><script type="text/javascript">var duoshuoQuery = {short_name: "zbbk" };
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></section><div class="copyright"><p>© 2015 -  2016<span class="heart"><i class="icon-next-heart fa fa-heart"></i></span><a href="http://blog.zbvae.com">Bin Zhang</a></p></div></footer></div><label for="sidebar-toggle" class="sidebar-menu"><div class="menu"></div></label><label class="back2top"> <a href="#top"><div class="arrow"></div></a></label></body></html>