<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>Java 比较器 | zbvae&#39;s blog</title>
  <meta name="description" content="这个世界怎么了，明明可以靠才华吃饭，偏要靠脸!" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="/css/component.css" />
  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <meta name="generator" content="zbvae's blog">
  <script src="http://static.duoshuo.com/embed.js"></script>
  
  
  <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="atom.xml">
  
  

  

</head>
<body>
<div class="container">
    <div class="mp-pusher" id="mp-pusher">
        <i id="scroll-up" class="fa fa-angle-up"></i>
        <nav id="mp-menu" class="mp-menu">
            <div class="mp-level">
                <a data-pjax class="back-home" style="font-size: 20px" href="/"><h2 ><i class="fa fa-home"></i>
                        Home</h2></a>
                <ul class="first-level">
                    <li>
                        <a class="fa fa-archive" href="#"><i class="fa fa-angle-left">
                            </i>&nbsp;&nbsp;Archive</a>
                        <div class="mp-level page-list">
                            <h2 ><i class="fa fa-archive"></i>
                                Archive</h2>
                            <a class="mp-back" href="#">back</a>
                            <form id="search-form" action="">
                                <input type="text" class="search search-archive" placeholder="Search.."/>
                            </form>
                            <ul>
                                <div class="mp-scroll">
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2016/03/17/Java微信公众号应用部署在阿里云ECS/">Java微信公众号应用部署在阿里云ECS</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2016/03/08/CENTOS-6-5安装vncserver/">CENTOS 6.5安装vncserver</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2016/02/24/新新新年/">新新新年</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/31/Java-Web中文乱码问题解决方法/">Java Web中文乱码问题解决方法</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/28/数据结构-内排序算法/">数据结构-内排序算法</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/26/数据结构-图/">数据结构-图</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/23/数据结构-二叉树/">数据结构-二叉树</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/21/数据结构-多维数组和广义表/">数据结构-多维数组和广义表</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/20/数据结构-串/">数据结构-串</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/20/数据结构-栈与队列/">数据结构-栈与队列</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/19/数据结构-线性表/">数据结构-线性表</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/18/八皇后问题/">八皇后问题</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/12/Java-NIO-学习/">Java NIO 学习</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/11/Java-类集/">Java 类集</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/11/Java-比较器/">Java 比较器</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/11/正则表达式/">正则表达式</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/11/XML-学习/">XML 学习</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/11/Java-JDBC-学习/">Java JDBC 学习</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/11/Java-多线程/">Java 多线程</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/11/Java-反射/">Java 反射</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/11/使用Echarts制作散点图-Excel-导入数据方式/">使用Echarts制作散点图(Excel 导入数据方式)</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/11/Java-对象克隆/">Java 对象克隆</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/11/Java-对象序列化与反序列化/">Java 对象序列化与反序列化</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/11/Java-IO-学习/">Java IO 学习</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2015/07/09/使用Hexo和Github搭建自己的个人博客网站/">使用Hexo和Github搭建自己的个人博客网站</a>
                                </li>
                                
                                </div>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a class="fa fa-copy" href="#"><i class="fa fa-angle-left">
                            </i>&nbsp;&nbsp;Categories</a>

                        <div class="mp-level page-list">
                            <h2 ><i class="fa fa-copy"></i>
                                Categories</h2>
                            <a class="mp-back" href="#">back</a>
                            <form id="search-form" action="">
                                <input type="text" class="search search-category" placeholder="Search.."/>
                            </form>
                            <ul>
                                <div class="mp-scroll">
                                
                                </div>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a class="fa fa-tags" href="#"><i class="fa fa-angle-left">
                            </i>&nbsp;&nbsp;Tags</a>
                        <div class="mp-level page-list">
                            <h2 ><i class="fa fa-tags"></i>
                                Tags</h2>
                            <a class="mp-back" href="#">back</a>
                            <form id="search-form" action="">
                                <input type="text" class="search search-tag" placeholder="Search.."/>
                            </form>
                            <ul>
                                <div class="mp-scroll">
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/Java学习/">&nbsp;&nbsp;&nbsp;Java学习</a>
                                    <small>9</small>
                                </li>
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/云服务器/">&nbsp;&nbsp;&nbsp;云服务器</a>
                                    <small>2</small>
                                </li>
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/微信公众号/">&nbsp;&nbsp;&nbsp;微信公众号</a>
                                    <small>1</small>
                                </li>
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/心情/">&nbsp;&nbsp;&nbsp;心情</a>
                                    <small>1</small>
                                </li>
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/技术/">&nbsp;&nbsp;&nbsp;技术</a>
                                    <small>1</small>
                                </li>
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/技术交流/">&nbsp;&nbsp;&nbsp;技术交流</a>
                                    <small>6</small>
                                </li>
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/数据结构/">&nbsp;&nbsp;&nbsp;数据结构</a>
                                    <small>7</small>
                                </li>
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/随笔/">&nbsp;&nbsp;&nbsp;随笔</a>
                                    <small>1</small>
                                </li>
                                
                                </div>
                            </ul>
                        </div>
                    </li>
                    
                    <li class="mp-pjax"><a class="fa fa-user" href="/about">&nbsp;&nbsp;&nbsp;About me</a></li>
                    <li><a class="fa fa-github" href="#">&nbsp;&nbsp;&nbsp;Github</a></li>

                </ul>

            </div>
        </nav>
        <div id="pjax">
            <div class="pjax-hidden" style="display: none">
                
                    <a  data-pjax href="/2016/03/17/Java微信公众号应用部署在阿里云ECS/">Java微信公众号应用部署在阿里云ECS</a>
                
                    <a  data-pjax href="/2016/03/08/CENTOS-6-5安装vncserver/">CENTOS 6.5安装vncserver</a>
                
                    <a  data-pjax href="/2016/02/24/新新新年/">新新新年</a>
                
                    <a  data-pjax href="/2015/07/31/Java-Web中文乱码问题解决方法/">Java Web中文乱码问题解决方法</a>
                
                    <a  data-pjax href="/2015/07/28/数据结构-内排序算法/">数据结构-内排序算法</a>
                
                    <a  data-pjax href="/2015/07/26/数据结构-图/">数据结构-图</a>
                
                    <a  data-pjax href="/2015/07/23/数据结构-二叉树/">数据结构-二叉树</a>
                
                    <a  data-pjax href="/2015/07/21/数据结构-多维数组和广义表/">数据结构-多维数组和广义表</a>
                
                    <a  data-pjax href="/2015/07/20/数据结构-串/">数据结构-串</a>
                
                    <a  data-pjax href="/2015/07/20/数据结构-栈与队列/">数据结构-栈与队列</a>
                
                    <a  data-pjax href="/2015/07/19/数据结构-线性表/">数据结构-线性表</a>
                
                    <a  data-pjax href="/2015/07/18/八皇后问题/">八皇后问题</a>
                
                    <a  data-pjax href="/2015/07/12/Java-NIO-学习/">Java NIO 学习</a>
                
                    <a  data-pjax href="/2015/07/11/Java-类集/">Java 类集</a>
                
                    <a  data-pjax href="/2015/07/11/Java-比较器/">Java 比较器</a>
                
                    <a  data-pjax href="/2015/07/11/正则表达式/">正则表达式</a>
                
                    <a  data-pjax href="/2015/07/11/XML-学习/">XML 学习</a>
                
                    <a  data-pjax href="/2015/07/11/Java-JDBC-学习/">Java JDBC 学习</a>
                
                    <a  data-pjax href="/2015/07/11/Java-多线程/">Java 多线程</a>
                
                    <a  data-pjax href="/2015/07/11/Java-反射/">Java 反射</a>
                
                    <a  data-pjax href="/2015/07/11/使用Echarts制作散点图-Excel-导入数据方式/">使用Echarts制作散点图(Excel 导入数据方式)</a>
                
                    <a  data-pjax href="/2015/07/11/Java-对象克隆/">Java 对象克隆</a>
                
                    <a  data-pjax href="/2015/07/11/Java-对象序列化与反序列化/">Java 对象序列化与反序列化</a>
                
                    <a  data-pjax href="/2015/07/11/Java-IO-学习/">Java IO 学习</a>
                
                    <a  data-pjax href="/2015/07/09/使用Hexo和Github搭建自己的个人博客网站/">使用Hexo和Github搭建自己的个人博客网站</a>
                
                
                
                    <a data-pjax href="/tags/Java学习/">&nbsp;&nbsp;Java学习</a>
                
                    <a data-pjax href="/tags/云服务器/">&nbsp;&nbsp;云服务器</a>
                
                    <a data-pjax href="/tags/微信公众号/">&nbsp;&nbsp;微信公众号</a>
                
                    <a data-pjax href="/tags/心情/">&nbsp;&nbsp;心情</a>
                
                    <a data-pjax href="/tags/技术/">&nbsp;&nbsp;技术</a>
                
                    <a data-pjax href="/tags/技术交流/">&nbsp;&nbsp;技术交流</a>
                
                    <a data-pjax href="/tags/数据结构/">&nbsp;&nbsp;数据结构</a>
                
                    <a data-pjax href="/tags/随笔/">&nbsp;&nbsp;随笔</a>
                
                <a data-pjax class="fa fa-user" href="/about">&nbsp;&nbsp;&nbsp;About me</a>
            </div>
            <nav class="nexus">
                <li  style="border-left: 1px solid #c6d0da;">
                    <a id="trigger" href="#"><i class="fa fa-bars"></i></a>
                </li>
                <li ><a id="nexus-back" data-pjax href="/">zbvae&#39;s blog</a></li>
                
                <div id="nav-container">
                    <div class="post-navbar" style="line-height: 63px;display:none">
                        <li id="navbar-title"><a href="#">Java 比较器</a></li>
                        <li id="navbar-toc" style="border-left: none">
                            <a style="padding-right: 15px">
                                <span id="toc-content" >Introduction</span><i class="fa fa-chevron-down" ></i>
                            </a>
                            <div class="hidden-box">
                                <ul id="toc"></ul>
                            </div>
                        </li>
                    </div>
                </div>
                
            </nav>

            <div class="scroller">
            <div class="scroller-inner">


<!-- -->
<!--<body class="post-template">-->
<!---->
  

<main class="content" role="main">
    <article class="post" >
    <span class="post-meta">
                  <div class="tag-tile">
                      
                      
                      <a data-pjax href='/tags/Java学习/' style='color:#D5D5D5'>Java学习</a>
                      
                      
                  </div>
                <h1 class="post-title" style="margin: 14px 0;color:#50585D">Java 比较器</h1>

                    <div class="post-meta">
                        Post on<span class="fa fa-clock-o"></span>
                        <time datetime="2015-07-11T06:57:40.000Z"
                              itemprop="datePublished">2015-07-11</time>
                    </div>
    </span>

        <section class="post-content">
            <p><strong>摘要</strong>：Java中Arrays以及支持可排序功能的集合类等都提供了对象比较功能，那么它是如何实现的呢，能直接使用Arrays来比较两个自定义的对象数组吗，答案是否定的。下面本文从Arrays类出发，介绍对象数组的比较功能，以及两种比较器的实现方式。<a id="more"></a></p>
<h2 id="1-Arrays类提供的比较功能">1.Arrays类提供的比较功能</h2><p>　　java.util包中Arrays类作为一个工具类，提供了大量用于数组操作的静态方法，其中包括数组二分查找，对象数组的比较以及对象数组的排序等功能，供用户方便使用。例如使用下面的例子对两个int数组进行比较如下：</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TestCompare</span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> a[] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">		<span class="keyword">int</span> b[] = &#123;<span class="number">5</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">6</span>,<span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line">		Arrays.sort(b);</span><br><span class="line">		System.<span class="keyword">out</span>.println(Arrays.equals(a,b));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>答案返回true，如果将int更改其包装类Integer，再试一下结果还是一样的，可以排序和比较成功。如果换成我们自己定义的类呢。下面是自定义的Student类，包含名字，年龄，成绩属性，现在希望使用Arrays对Student对象数组进行排序，又会怎样呢？</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Student</span>&#123;</span><br><span class="line"> 	<span class="keyword">private</span> String name = <span class="keyword">null</span>;</span><br><span class="line"> 	<span class="keyword">private</span> <span class="keyword">int</span> age = <span class="number">0</span>;</span><br><span class="line"> 	<span class="keyword">private</span> <span class="keyword">double</span> score = <span class="number">0.0</span>;</span><br><span class="line"></span><br><span class="line"> 	<span class="function"><span class="keyword">public</span> <span class="title">Student</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"></span><br><span class="line"> 	&#125;</span><br><span class="line"></span><br><span class="line"> 	<span class="function"><span class="keyword">public</span> <span class="title">Student</span>(<span class="params">String name,<span class="keyword">int</span> age,<span class="keyword">double</span> score</span>)</span>&#123;</span><br><span class="line">  		<span class="keyword">this</span>.name = name;</span><br><span class="line">  		<span class="keyword">this</span>.age = age;</span><br><span class="line">  		<span class="keyword">this</span>.score = score;</span><br><span class="line"> 	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  		<span class="keyword">return</span> <span class="string">"name="</span> + <span class="keyword">this</span>.name + <span class="string">" age="</span> + <span class="keyword">this</span>.age + <span class="string">" score="</span> + <span class="keyword">this</span>.score;</span><br><span class="line"> 	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后在主函数中定义一个Student对象数组，并对其进行比较，输出。</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Student stu[] = &#123;<span class="keyword">new</span> Student(<span class="string">"zhangsan"</span>,<span class="number">10</span>,<span class="number">88.5</span>),<span class="keyword">new</span> Student(<span class="string">"lisi"</span>,<span class="number">12</span>,<span class="number">92.3</span>),</span><br><span class="line"><span class="keyword">new</span> Student(<span class="string">"wangwu"</span>,<span class="number">11</span>,<span class="number">85.6</span>),<span class="keyword">new</span> Student(<span class="string">"zhaoliu"</span>,<span class="number">12</span>,<span class="number">94.5</span>)&#125;;</span><br><span class="line"></span><br><span class="line">System.out.<span class="keyword">println</span>(<span class="string">"before sort:"</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;stu.length;i++)&#123;</span><br><span class="line">	System.out.<span class="keyword">println</span>(stu[i]);</span><br><span class="line">&#125;</span><br><span class="line">Arrays.<span class="keyword">sort</span>(stu);</span><br><span class="line">System.out.<span class="keyword">println</span>(<span class="string">"after sort:"</span>);</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;stu.length;i++)&#123;</span><br><span class="line">	System.out.<span class="keyword">println</span>(stu[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>比较之前，可以正常输出对象数组信息，比较没有成功返回结果，而是打印出如下信息：</p>
<blockquote>
<p>before sort:<br>name=zhangsan age=10 score=88.5<br>name=lisi age=12 score=92.3<br>name=wangwu age=11 score=85.6<br>name=zhaoliu age=12 score=94.5<br>Exception in thread “main” java.lang.ClassCastException: Student cannot be cast to java.lang.Comparable<br> at java.util.ComparableTimSort.countRunAndMakeAscending(Unknown Source)<br> at java.util.ComparableTimSort.sort(Unknown Source)<br> at java.util.ComparableTimSort.sort(Unknown Source)<br> at java.util.Arrays.sort(Unknown Source)<br> at TestCompare.main(TestCompare.java:18)</p>
</blockquote>
<p>为什么会出现以上类型转换异常呢，再回过头来看看Arrays的sort方法是如何支持对象数组的比较的。</p>
<blockquote>
<p>public static void sort([] a)</p>
<blockquote>
<p>Sorts the specified array of objects into ascending order, according to the natural ordering of its elements. All elements in the array must implement the Comparable interface. Furthermore, all elements in the array must be mutually comparable (that is, e1.compareTo(e2) must not throw a ClassCastException for any elements e1 and e2 in the array).</p>
</blockquote>
</blockquote>
<h2 id="2-类本身实现Comparable接口实现比较">2.类本身实现Comparable接口实现比较</h2><p>　　从以上描述可以看出，Arrays的sort方法默认对数组中对象以升序排序，以一个自然顺序，那么这个自然顺序的定义必须使用Comparable接口来完成，即如果要实现对象数组的排序，则此类必须实现Comparable接口，并覆写compareTo方法。下面通过改造Student类，使其实现Comparable接口，并覆写compareTo方法如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">implements</span> <span class="title">Comparable</span>&lt;<span class="title">Student</span>&gt; </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name = <span class="keyword">null</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> score = <span class="number">0.0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name,<span class="keyword">int</span> age,<span class="keyword">double</span> score)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">		<span class="keyword">this</span>.score = score;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Student stu)</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">this</span>.score &gt; stu.score)&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="keyword">this</span>.score &lt; stu.score)&#123;</span><br><span class="line">			<span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"name="</span> + <span class="keyword">this</span>.name + <span class="string">" age="</span> + <span class="keyword">this</span>.age + <span class="string">" score="</span> + <span class="keyword">this</span>.score;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>再次在主函数中使用Arrays的sort对Student数组进行排序，看有什么改变，输出如下：</p>
<blockquote>
<p> before sort:<br>name=zhangsan age=10 score=88.5<br>name=lisi age=12 score=92.3<br>name=wangwu age=11 score=85.6<br>name=zhaoliu age=12 score=94.5<br>after sort:<br>name=wangwu age=11 score=85.6<br>name=zhangsan age=10 score=88.5<br>name=lisi age=12 score=92.3<br>name=zhaoliu age=12 score=94.5</p>
</blockquote>
<p>程序成功实现了成绩的升序排序，要实现降序，可以在compareTo方法中对调1和-1即可，可以发现Comparable接口支持泛型，可以帮助我们进行类型检查。实际上这种Comparable接口的 compareTo方法有点类似于二叉排序树，下面就Comparable接口定义一个二叉排序树，如下：（实际上这部分内容属于数据结构，但是从此例子可以清晰发现Comparable与二叉排序树的一致性）</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">BinarrySortTree</span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">class</span> <span class="title">Node</span>&#123;</span><br><span class="line">		<span class="keyword">private</span> Comparable data;</span><br><span class="line">		<span class="keyword">private</span> Node left;</span><br><span class="line">		<span class="keyword">private</span> Node right;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="title">Node</span>(<span class="params">Comparable data</span>)</span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.data = data;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addNode</span>(<span class="params">Node newNode</span>)</span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(newNode.data.compareTo(<span class="keyword">this</span>.data) &lt; <span class="number">0</span>)&#123;<span class="comment">//left tree</span></span><br><span class="line">				<span class="keyword">if</span>(<span class="keyword">this</span>.left == <span class="keyword">null</span>)&#123;</span><br><span class="line">					<span class="keyword">this</span>.left = newNode;</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					<span class="keyword">this</span>.left.addNode(newNode);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;<span class="function"><span class="keyword">else</span> <span class="title">if</span>(<span class="params">newNode.data.compareTo(<span class="keyword">this</span>.data</span>) &gt; 0)</span>&#123;<span class="comment">//right tree</span></span><br><span class="line">				<span class="keyword">if</span>(<span class="keyword">this</span>.right == <span class="keyword">null</span>)&#123;</span><br><span class="line">					<span class="keyword">this</span>.right = newNode;</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					<span class="keyword">this</span>.right.addNode(newNode);</span><br><span class="line">				&#125;</span><br><span class="line">				</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printNode</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(<span class="keyword">this</span>.left != <span class="keyword">null</span>)&#123;</span><br><span class="line">				<span class="keyword">this</span>.left.printNode();</span><br><span class="line">			&#125;</span><br><span class="line">			System.<span class="keyword">out</span>.println(<span class="keyword">this</span>.data);</span><br><span class="line">			<span class="keyword">if</span>(<span class="keyword">this</span>.right != <span class="keyword">null</span>)&#123;</span><br><span class="line">				<span class="keyword">this</span>.right.printNode();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> Node root = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span>(<span class="params">Comparable data</span>)</span>&#123;</span><br><span class="line">		Node newNode = <span class="keyword">new</span> Node(data);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(root == <span class="keyword">null</span>)&#123;</span><br><span class="line">			root = newNode;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			root.addNode(newNode);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.root.printNode();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在主函数中添加节点，并进行中序遍历输出：</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BinarrySortTree </span>tree = new <span class="keyword">BinarrySortTree();</span><br><span class="line"></span><span class="label">for</span>(int i<span class="number">=0</span><span class="comment">;i&lt;5;i++)&#123;</span></span><br><span class="line">	tree.<span class="keyword">add(5-i);</span><br><span class="line"></span>&#125;</span><br><span class="line"><span class="label">tree.print</span>()<span class="comment">;</span></span><br></pre></td></tr></table></figure>
<h2 id="3-类外部定义比较器">3.类外部定义比较器</h2><p>　　还有一种支持对象比较的方式，属于一种补救方式，比如在大型项目中，我所设计的类已经定义打包好了，不希望再对它进行任何修改，现在为了要使此类具有可比较特性，还有一种补救方法就是在类外部定义一个特定的比较器，降低类的耦合度。但此种方法不推荐使用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Worker</span></span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String name = <span class="keyword">null</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> age = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> salary = <span class="number">0.0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	    <span class="keyword">return</span> <span class="keyword">this</span>.age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getSalary</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	    <span class="keyword">return</span> <span class="keyword">this</span>.salary;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">	    <span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">	    <span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSalary</span><span class="params">(<span class="keyword">double</span> salary)</span> </span>&#123;</span><br><span class="line">	    <span class="keyword">this</span>.salary = salary;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Worker</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Worker</span><span class="params">(String name, <span class="keyword">int</span> age, <span class="keyword">double</span> salary)</span></span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">		<span class="keyword">this</span>.salary = salary;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(o == <span class="keyword">null</span>)</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		<span class="keyword">if</span>(!(o <span class="keyword">instanceof</span> Worker))</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		Worker worker = (Worker)o;</span><br><span class="line">		<span class="keyword">if</span>(<span class="keyword">this</span>.name.equals(worker.name) &amp;&amp; <span class="keyword">this</span>.age == worker.age </span><br><span class="line">		&amp;&amp; <span class="keyword">this</span>.salary == worker.salary)</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"name="</span> + <span class="keyword">this</span>.name + <span class="string">" age="</span> + <span class="keyword">this</span>.age + <span class="string">" salary="</span> + <span class="keyword">this</span>.salary;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>定义外在的WorkerComparator比较器 ，需要实现该接口的equals和compare方法，equals一般在要支持比较的那个类内部定义完善。使用上述Comparator比较器。</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WorkerComparator</span> <span class="keyword">implements</span> <span class="title">Comparator</span>&lt;<span class="title">Worker</span>&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span></span>&#123;</span><br><span class="line">		<span class="function"><span class="keyword">return</span> <span class="keyword">this</span>.<span class="title">equals</span><span class="params">(obj)</span></span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">int</span> <span class="title">compare</span><span class="params">(Worker o1, Worker o2)</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(o1.getSalary() &lt; o2.getSalary())&#123;</span><br><span class="line">			<span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span>(o1.getSalary() &gt; o2.getSalary())&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>程序输出如下：</p>
<blockquote>
<p>before sort:<br>name=peter age=30 salary=12000.0<br>name=tony age=25 salary=15000.0<br>name=paul age=31 salary=13000.0<br>name=danel age=35 salary=25000.0<br>after sort:<br>name=peter age=30 salary=12000.0<br>name=paul age=31 salary=13000.0<br>name=tony age=25 salary=15000.0<br>name=danel age=35 salary=25000.0</p>
</blockquote>
<p>说明这种方式也支持对象数组的比较，但还是推荐大家使用定义类的同时，如果觉得此类有必要支持比较，就实现Comparable接口，毕竟Comparator是作为一种补救出现。</p>
<h2 id="4-两种比较方式的区别">4.两种比较方式的区别</h2><p>从网上看到的一些关于这两个接口的比较：</p>
<ul>
<li>Comparable接口位于java.lang包中，Comparator接口位于java.util包中</li>
<li>Comparable属于自然顺序比较排序，对于TreeSet或者TreeMap中的Key可以实现有序映射，而不需要制定比较器</li>
<li>Comparator属于一种策略模式，即不修改原对象，使用策略对象来达到修改原对象行为的目的</li>
<li>Comparable接口是集合内部定义，自己完成比较；Comparator是外部程序实现比较。</li>
</ul>

        </section>
        <hr/>
        <nav class="pagination" style="width:auto" role="pagination">
            
            <a data-pjax class="newer-posts" href="/2015/07/11/Java-类集/">← Prev Post</a>
            
            <a class="share-button" data-original-title title>Share this Post</a>
            
            <a data-pjax class="older-posts" href="/2015/07/11/正则表达式/">Next Post →</a>
            
        </nav>
        <br/>
        <br/>
        <section id="comment">
            <div id="comment-box"></div>
        </section>


    </article>
</main>


  
<footer class="site-footer">
    
    <a class="subscribe icon-feed" href="atom.xml"><span class="tooltip">Subscribe!</span></a>
    
    <div class="inner">
        <section class="copyright"><a href="/"></a> &copy; zbvae's blog 2014</section>
        <section class="poweredby">Published with <a target="_blank" href="http://hexo.io/">Hexo   </a> and Theme by <a target="_blank" href="https://github.com/yuche/hexo-theme-kael">Kael</a></section>
    </div>
</footer>
</div>
</div><!-- /scroller -->

</div><!-- /pusher -->
</div><!-- /container -->
</div>

<!-- Easter eggs -->

<div class="egg animated">
    <a id="close-button" href="#">X</a>
    <div class="block">
        <div class="loading">
            <span class="ball1"></span>
            <span class="ball2"></span>
        </div>
    </div>
</div>
  
<script src="//cdn.staticfile.org/jquery/1.11.0/jquery.min.js"></script>
<script>
    if (!window.jQuery) {
        var script = document.createElement('script');
        script.src = "/js/jquery.min.js";
        document.body.appendChild(script);
    }
</script>
<script type="text/javascript" src="/js/lib.js"></script>
<script type="text/javascript" src="/js/main.js"></script>







</body>
</html>
